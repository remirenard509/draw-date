<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/html

    <Directory /var/www/html>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    
    # Permettre à certbot d'écrire
    Alias /.well-known/acme-challenge/ "/var/www/certbot/.well-known/acme-challenge/"
    <Directory "/var/www/certbot/.well-known/acme-challenge/">
        AllowOverride None
        Options None
        Require all granted
    </Directory>

    # Redirige tout vers HTTPS après le certificat
    # Redirect permanent "/" "https://ton-domaine.com/"

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined

    # Bloquer les fichiers cachés (ex : .env, .gitignore)
    <FilesMatch "^\.">
    Require all denied
    </FilesMatch>

    # Bloquer l'accès au dossier .git
    RedirectMatch 404 /\.git

    # Bloquer le fichier .env
    <Files .env>
    Order allow,deny
    Deny from all
    </Files>

</VirtualHost>
<VirtualHost *:443>
    ServerName draw-date.duckdns.org
    ServerAlias www.draw-date.duckdns.org
    DocumentRoot /usr/local/apache2/htdocs

    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/draw-date.duckdns.org/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/draw-date.duckdns.org/privkey.pem
</VirtualHost>

